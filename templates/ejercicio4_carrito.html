<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ titulo }}</title>
    <meta name="description" content="{{ descripcion }}">
    
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <style>
        .shop-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem 0;
        }
        
        .product-card {
            border: 1px solid #dee2e6;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            background: white;
            transition: all 0.3s ease;
        }
        
        .product-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .product-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 1rem;
        }
        
        .price {
            font-size: 1.5rem;
            font-weight: bold;
            color: #007bff;
        }
        
        .cart-sidebar {
            position: fixed;
            right: -400px;
            top: 0;
            width: 400px;
            height: 100vh;
            background: white;
            box-shadow: -5px 0 15px rgba(0,0,0,0.1);
            z-index: 1050;
            transition: right 0.3s ease;
            overflow-y: auto;
            padding: 2rem;
        }
        
        .cart-sidebar.open {
            right: 0;
        }
        
        .cart-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1040;
            display: none;
        }
        
        .cart-overlay.show {
            display: block;
        }
        
        .cart-item {
            display: flex;
            align-items: center;
            padding: 1rem;
            border-bottom: 1px solid #e9ecef;
            gap: 1rem;
        }
        
        .cart-item-image {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 5px;
        }
        
        .cart-item-details {
            flex: 1;
        }
        
        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .quantity-btn {
            width: 30px;
            height: 30px;
            border: 1px solid #dee2e6;
            background: white;
            border-radius: 3px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-weight: bold;
        }
        
        .quantity-input {
            width: 50px;
            text-align: center;
            border: 1px solid #dee2e6;
            border-radius: 3px;
            padding: 0.25rem;
        }
        
        .cart-summary {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 8px;
            margin-top: 1rem;
        }
        
        .cart-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #dc3545;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 0.75rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .loading-product {
            opacity: 0.6;
            pointer-events: none;
        }
        
        .success-animation {
            animation: successPulse 0.6s ease;
        }
        
        @keyframes successPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        /* PROBLEMAS INTENCIONADOS */
        .product-actions {
            display: flex;
            gap: 0.5rem;
            align-items: center;
            margin-top: 1rem;
        }

        /* Ajuste: colores con contraste suficiente y manejo de foco */
        .btn-add-cart {
            background: #155724;             /* verde oscuro con buen contraste frente a #ffffff */
            color: #ffffff;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 500;
        }

        .btn-add-cart:hover {
            background: #0f3f1a;
        }

        .btn-add-cart:focus {
            outline: 3px solid rgba(21, 87, 36, 0.25);
            outline-offset: 2px;
            box-shadow: 0 0 0 3px rgba(21, 87, 36, 0.12);
        }

        /* Mantener contraste cuando exista estilo inline (se usa !important para sobrescribir) */
        .btn-add-cart {
            background-color: #155724 !important;
            color: #ffffff !important;
        }

        .btn-add-cart:disabled {
            background: #6c757d;
            color: #ffffff;
            cursor: not-allowed;
            opacity: 0.9;
        }

        /* NUEVO: bot√≥n "Notificar disponibilidad" con contraste y foco accesible */
        .btn-notify {
            background-color: #004085 !important; /* m√°s oscuro que #007bff -> contraste >= 4.5:1 */
            color: #ffffff !important;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            margin-left: 0.5rem;
            cursor: pointer;
            font-weight: 500;
        }
        .btn-notify:hover {
            background-color: #00366b !important;
        }
        .btn-notify:focus {
            outline: 3px solid rgba(0, 64, 133, 0.22);
            outline-offset: 2px;
            box-shadow: 0 0 0 3px rgba(0, 64, 133, 0.12);
        }
        .btn-notify:disabled {
            background: #6c757d !important;
            color: #ffffff !important;
            cursor: not-allowed;
            opacity: 0.9;
        }

        /* Skip link visible on focus */
        .skip-link {
            position: absolute;
            left: -999px;
            top: auto;
            width: 1px;
            height: 1px;
            overflow: hidden;
        }
        .skip-link:focus {
            position: static;
            left: auto;
            width: auto;
            height: auto;
            padding: 0.5rem 1rem;
            background: #000;
            color: #fff;
            z-index: 9999;
            text-decoration: none;
            border-radius: 4px;
        }
    </style>
</head>

<body>
        <!-- Skip link para saltar al contenido principal -->
        <a href="#mainContent" class="skip-link">Saltar al contenido</a>
        
        <!-- PROBLEMA: Falta skip links -->
        
        <!-- Header de la tienda -->
        <header class="shop-header">
            <div class="container">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h1>TechShop</h1>
                        <p class="mb-0">Los mejores productos tecnol√≥gicos</p>
                    </div>
                    
                    <!-- PROBLEMA: Carrito sin informaci√≥n accesible -->
                    <div style="position: relative;">
                        <button id="openCartBtn" class="btn btn-light btn-lg" aria-haspopup="dialog" aria-controls="cartSidebar" aria-label="Abrir carrito">
                            üõí Carrito
                            <span id="cartBadge" class="cart-badge" style="display: none;" aria-hidden="true">0</span>
                            <span id="cartBadgeLabel" class="visually-hidden" aria-live="polite" aria-atomic="true">Carrito vac√≠o</span>
                        </button>
                    </div>
                </div>
                
                <!-- Navegaci√≥n de regreso -->
                <div class="mt-3">
                    <a href="{{ url_for('index') }}" class="btn btn-outline-light">
                        ‚Üê Volver al portal
                    </a>
                </div>
            </div>
        </header>
        
        <!-- Contenido principal -->
        <main id="mainContent" class="container my-5" tabindex="-1" aria-label="Contenido principal">
        
        <!-- Filtros y b√∫squeda - PROBLEMAS -->
        <div class="row mb-4">
            <div class="col-md-6">
                <!-- PROBLEMA: Campo de b√∫squeda sin label -->
                <input type="text" 
                       class="form-control" 
                       placeholder="Buscar productos..." 
                       aria-label="Buscar productos" 
                       onkeyup="filterProducts(this.value)">
            </div>
            
            <div class="col-md-3">
                <!-- CORRECCI√ìN: A√±adir label accesible (visualmente oculto).
                     Evitar "jump menu" ejecutando la ordenaci√≥n solo al aplicar (bot√≥n)
                     para prevenir acciones inesperadas y mejorar accesibilidad. -->
                <label for="sortSelect" class="visually-hidden">Ordenar productos</label>
                <div style="display:flex; gap:0.5rem; align-items:center;">
                    <select id="sortSelect" class="form-select" aria-label="Seleccionar criterio de orden">
                         <option value="">Ordenar por...</option>
                         <option value="name">Nombre</option>
                         <option value="price-low">Precio: Menor a Mayor</option>
                         <option value="price-high">Precio: Mayor a Menor</option>
                         <option value="rating">Calificaci√≥n</option>
                     </select>
                     <button id="applySortBtn" class="btn btn-outline-secondary" type="button" aria-label="Aplicar orden">Aplicar</button>
                </div>
             </div>
            
            <div class="col-md-3">
                <label for="filterSelect" class="visually-hidden">Filtrar por categor√≠a</label>
                <div style="display:flex; gap:0.5rem; align-items:center;">
                    <select id="filterSelect" class="form-select" aria-label="Seleccionar categor√≠a para filtrar">
                         <option value="">Todas las categor√≠as</option>
                         <option value="laptops">Laptops</option>
                         <option value="phones">Tel√©fonos</option>
                         <option value="accessories">Accesorios</option>
                         <option value="software">Software</option>
                     </select>
                     <button id="applyFilterBtn" class="btn btn-outline-secondary" type="button" aria-label="Aplicar filtro de categor√≠a">Aplicar</button>
                </div>
             </div>
        </div>
        
        <!-- Grid de productos - M√öLTIPLES PROBLEMAS -->
        <div class="row" id="productsGrid">
            
            <!-- Producto 1 -->
            <div class="col-lg-4 col-md-6 product-item" data-category="laptops">
                <!-- PROBLEMA: Producto sin estructura sem√°ntica -->
                <article class="product-card" aria-labelledby="title-laptop-1">
                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='200'%3E%3Crect width='300' height='200' fill='%23e9ecef'/%3E%3Ctext x='150' y='100' text-anchor='middle' fill='%23495057' font-size='14'%3ELaptop Gaming%3C/text%3E%3C/svg%3E" 
                         class="product-image" alt="Laptop Gaming Pro X1, Intel i7, 16GB RAM, RTX 3070">

                    <h2 id="title-laptop-1" class="product-title" style="font-size:1.3rem; font-weight: 600; margin-bottom:0.5rem;">Laptop Gaming Pro X1</h2>
                    
                    <div class="product-description">
                        Intel i7, 16GB RAM, RTX 3070, SSD 1TB. Perfecta para gaming y trabajo profesional.
                    </div>
                    
                    <!-- Calificaci√≥n accesible -->
                    <div style="margin: 1rem 0;">
                        <span aria-hidden="true">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span>
                        <span class="visually-hidden">Puntuaci√≥n 5 de 5. 47 rese√±as.</span>
                        <span style="color: #6c757d; margin-left: 0.5rem;">(47 rese√±as)</span>
                    </div>
                    
                    <div class="d-flex justify-content-between align-items-center">
                        <span class="price">‚Ç¨1,299.99</span>
                        <!-- Estado de stock accesible -->
                        <span class="stock-info stock-ok" role="status" aria-live="polite" aria-atomic="true">
                            ‚úÖ En stock (12 unidades)
                            <span class="visually-hidden">En stock: 12 unidades</span>
                        </span>
                     </div>
                     
                     <div class="product-actions">
                         <!-- PROBLEMA: Bot√≥n sin descripci√≥n de acci√≥n -->
                        <button class="btn-add-cart" 
                                onclick="addToCart('laptop-1', 'Laptop Gaming Pro X1', 1299.99)"
                                data-product-id="laptop-1"
                                aria-label="A√±adir Laptop Gaming Pro X1 al carrito">
                            A√±adir al carrito
                        </button>
                        
                        <!-- CORRECCI√ìN: Selector de cantidad con label accesible -->
                        <label for="qty-laptop-1" class="visually-hidden">Cantidad para Laptop Gaming Pro X1</label>
                        <select id="qty-laptop-1" style="width: 80px; margin-left: 0.5rem;" aria-label="Seleccionar cantidad para Laptop Gaming Pro X1">
                              <option value="1">1</option>
                              <option value="2">2</option>
                              <option value="3">3</option>
                              <option value="4">4</option>
                              <option value="5">5</option>
                          </select>
                        <button type="button" class="btn btn-sm btn-outline-secondary apply-qty-btn" data-product-id="laptop-1" aria-label="Aplicar cantidad seleccionada para Laptop Gaming Pro X1" style="margin-left:0.4rem;">OK</button>
                        
                        <!-- PROBLEMA: Bot√≥n favorito sin descripci√≥n -->
                        <button onclick="toggleFavorite('laptop-1')" 
                                style="background: none; border: none; font-size: 1.5rem;"
                                class="favorite-btn"
                                aria-pressed="false"
                                aria-label="Marcar Laptop Gaming Pro X1 como favorito"
                                data-product-id="laptop-1">
                            ü§ç
                        </button>
                     </div>
                 </article>
             </div>
            
            <!-- Producto 2 -->
            <div class="col-lg-4 col-md-6 product-item" data-category="phones">
                <article class="product-card" aria-labelledby="title-phone-1">
                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='200'%3E%3Crect width='300' height='200' fill='%23e9ecef'/%3E%3Ctext x='150' y='100' text-anchor='middle' fill='%23495057' font-size='14'%3ESmartphone%3C/text%3E%3C/svg%3E" 
                         class="product-image" alt="Smartphone Ultra 5G ‚Äî OLED 6.7, triple c√°mara 108MP, bater√≠a 5000mAh, 256GB">

                    <h2 id="title-phone-1" class="product-title" style="font-size: 1.3rem; font-weight: bold; margin-bottom: 0.5rem;">Smartphone Ultra 5G</h2>
                     
                     <div class="product-description">
                         Pantalla OLED 6.7", C√°mara triple 108MP, Bater√≠a 5000mAh, 256GB almacenamiento.
                     </div>
                    
                    <div style="margin: 1rem 0;">
                        <span>‚≠ê‚≠ê‚≠ê‚≠ê‚òÜ</span>
                        <span style="color: #6c757d; margin-left: 0.5rem;">(32 rese√±as)</span>
                    </div>
                    
                    <div class="d-flex justify-content-between align-items-center">
                        <span class="price" data-price="899.99">‚Ç¨899.99</span>
                        <span class="stock-info stock-low" role="status" aria-live="polite" aria-atomic="true">‚ö†Ô∏è Pocas unidades (3 restantes)
                            <span class="visually-hidden">Pocas unidades: 3 restantes</span>
                        </span>
                    </div>
                    
                    <div class="product-actions">
                        <button class="btn-add-cart" 
                                onclick="addToCart('phone-1', 'Smartphone Ultra 5G', 899.99)"
                                data-product-id="phone-1">
                            A√±adir al carrito
                        </button>
                        
                        <!-- CORRECCI√ìN: Selector de cantidad con label accesible -->
                        <label for="qty-phone-1" class="visually-hidden">Cantidad para Smartphone Ultra 5G</label>
                        <select id="qty-phone-1" style="width: 80px; margin-left: 0.5rem;" aria-label="Seleccionar cantidad para Smartphone Ultra 5G">
                             <option value="1">1</option>
                             <option value="2">2</option>
                             <option value="3">3</option>
                        </select>
                        <button type="button" class="btn btn-sm btn-outline-secondary apply-qty-btn" data-product-id="phone-1" aria-label="Aplicar cantidad seleccionada para Smartphone Ultra 5G" style="margin-left:0.4rem;">OK</button>
                        
                        <button onclick="toggleFavorite('phone-1')" 
                                style="background: none; border: none; font-size: 1.5rem;">
                            ü§ç
                        </button>
                    </div>
                </article>
            </div>
            
            <!-- Producto 3 -->
            <div class="col-lg-4 col-md-6 product-item" data-category="accessories">
                <article class="product-card" aria-labelledby="title-headphones-1">
                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='200'%3E%3Crect width='300' height='200' fill='%23e9ecef'/%3E%3Ctext x='150' y='100' text-anchor='middle' fill='%23495057' font-size='14'%3EAuriculares%3C/text%3E%3C/svg%3E" 
                         class="product-image" alt="Auriculares Wireless Pro ‚Äî cancelaci√≥n de ruido, 30h, Bluetooth 5.2, IPX4">

                    <h2 id="title-headphones-1" class="product-title" style="font-size: 1.3rem; font-weight: bold; margin-bottom: 0.5rem;">Auriculares Wireless Pro</h2>
                    
                    <div class="product-description">
                        Cancelaci√≥n de ruido activa, 30h de bater√≠a, Bluetooth 5.2, resistentes al agua IPX4.
                    </div>
                    
                    <div style="margin: 1rem 0;">
                        <span>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span>
                        <span style="color: #6c757d; margin-left: 0.5rem;">(89 rese√±as)</span>
                    </div>
                    
                    <div class="d-flex justify-content-between align-items-center">
                        <span class="price" data-price="199.99">‚Ç¨199.99</span>
                        <span class="stock-info stock-ok" role="status" aria-live="polite" aria-atomic="true">
                            ‚úÖ En stock (25 unidades)
                            <span class="visually-hidden">En stock: 25 unidades</span>
                        </span>
                    </div>
                    
                    <div class="product-actions">
                        <button class="btn-add-cart" 
                                onclick="addToCart('headphones-1', 'Auriculares Wireless Pro', 199.99)"
                                data-product-id="headphones-1">
                            A√±adir al carrito
                        </button>
                        
                        <label for="qty-headphones-1" class="visually-hidden">Cantidad para Auriculares Wireless Pro</label>
                        <select id="qty-headphones-1" style="width: 80px; margin-left: 0.5rem;" aria-label="Seleccionar cantidad para Auriculares Wireless Pro">
                             <option value="1">1</option>
                             <option value="2">2</option>
                             <option value="3">3</option>
                             <option value="4">4</option>
                             <option value="5">5</option>
                         </select>
                       <button type="button" class="btn btn-sm btn-outline-secondary apply-qty-btn" data-product-id="headphones-1" aria-label="Aplicar cantidad seleccionada para Auriculares Wireless Pro" style="margin-left:0.4rem;">OK</button>
                        
                        <button onclick="toggleFavorite('headphones-1')" 
                                style="background: none; border: none; font-size: 1.5rem;">
                            ü§ç
                        </button>
                    </div>
                </article>
            </div>
            
            <!-- Producto 4 - AGOTADO -->
            <div class="col-lg-4 col-md-6 product-item" data-category="software">
                <article class="product-card" aria-labelledby="title-software-1">
                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='200'%3E%3Crect width='300' height='200' fill='%23e9ecef'/%3E%3Ctext x='150' y='100' text-anchor='middle' fill='%23495057' font-size='14'%3ESoftware%3C/text%3E%3C/svg%3E" 
                         class="product-image" alt="Suite Productividad Pro ‚Äî editor, hojas de c√°lculo, presentaciones, licencia completa">

                    <h2 id="title-software-1" class="product-title" style="font-size: 1.3rem; font-weight: bold; margin-bottom: 0.5rem;">Suite Productividad Pro</h2>
                    
                    <div class="product-description">
                        Licencia completa: Editor de documentos, hojas de c√°lculo, presentaciones y m√°s herramientas.
                    </div>
                    
                    <div style="margin: 1rem 0;">
                        <span>‚≠ê‚≠ê‚≠ê‚≠ê‚òÜ</span>
                        <span style="color: #6c757d; margin-left: 0.5rem;">(156 rese√±as)</span>
                    </div>
                    
                    <div class="d-flex justify-content-between align-items-center">
                        <span class="price" data-price="149.99">‚Ç¨149.99</span>
                        <!-- Estado agotado con texto alternativo -->
                        <span class="stock-info stock-out" role="status" aria-live="polite" aria-atomic="true">‚ùå Agotado
                            <span class="visually-hidden">Producto agotado</span>
                        </span>
                    </div>
                    
                    <div class="product-actions">
                        <!-- PROBLEMA: Bot√≥n deshabilitado sin explicaci√≥n -->
                        <button class="btn-add-cart" 
                                disabled
                                data-product-id="software-1">
                            No disponible
                        </button>
                        
                        <!-- PROBLEMA: Bot√≥n notificar sin descripci√≥n -->
                        <button class="btn-notify"
                                type="button"
                                onclick="notifyWhenAvailable('software-1')"
                                aria-label="Notificarme cuando el producto est√© disponible"
                                title="Notificarme cuando est√© disponible">
                            Notificar disponibilidad
                        </button>
                    </div>
                </article>
            </div>
            
            <!-- M√°s productos similares... -->
            <div class="col-lg-4 col-md-6 product-item" data-category="accessories">
                <article class="product-card" aria-labelledby="title-keyboard-2">
                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='200'%3E%3Crect width='300' height='200' fill='%23e9ecef'/%3E%3Ctext x='150' y='100' text-anchor='middle' fill='%23495057' font-size='14'%3ETeclado%3C/text%3E%3C/svg%3E" 
                         class="product-image" alt="Teclado Mec√°nico RGB ‚Äî switches Cherry MX, retroiluminaci√≥n RGB, construcci√≥n de aluminio">

                    <h2 id="title-keyboard-2" class="product-title" style="font-size: 1.3rem; font-weight: bold; margin-bottom: 0.5rem;">Teclado Mec√°nico RGB</h2>
                    
                    <div class="product-description">
                        Switches Cherry MX, retroiluminaci√≥n RGB personalizable, construcci√≥n de aluminio premium.
                    </div>
                    
                    <div style="margin: 1rem 0;">
                        <span aria-hidden="true">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span>
                        <span class="visually-hidden">Puntuaci√≥n 5 de 5. 73 rese√±as.</span>
                        <span style="color: #6c757d; margin-left: 0.5rem;">(73 rese√±as)</span>
                    </div>

                    <div class="d-flex justify-content-between align-items-center">
                        <span class="price" data-price="129.99">‚Ç¨129.99</span>
                        <span class="stock-info stock-ok" role="status" aria-live="polite" aria-atomic="true">
                            ‚úÖ En stock (18 unidades)
                            <span class="visually-hidden">En stock: 18 unidades</span>
                        </span>
                    </div>

                    <div class="product-actions">
                        <button class="btn-add-cart" 
                                onclick="addToCart('keyboard-1', 'Teclado Mec√°nico RGB', 129.99)"
                                data-product-id="keyboard-1"
                                aria-label="A√±adir Teclado Mec√°nico RGB al carrito">
                            A√±adir al carrito
                        </button>

                        <label for="qty-keyboard-1" class="visually-hidden">Cantidad para Teclado Mec√°nico RGB</label>
                        <select id="qty-keyboard-1" style="width: 80px; margin-left: 0.5rem;" aria-label="Seleccionar cantidad para Teclado Mec√°nico RGB">
                             <option value="1">1</option>
                             <option value="2">2</option>
                             <option value="3">3</option>
                             <option value="4">4</option>
                         </select>
                        <button type="button" class="btn btn-sm btn-outline-secondary apply-qty-btn" data-product-id="keyboard-1" aria-label="Aplicar cantidad seleccionada para Teclado Mec√°nico RGB" style="margin-left:0.4rem;">OK</button>

                        <button class="favorite-btn" data-product-id="keyboard-1" aria-pressed="false" aria-label="Marcar Teclado Mec√°nico RGB como favorito" style="background:none;border:none;font-size:1.5rem;">ü§ç</button>
                    </div>
                </article>
            </div>
            
            <div class="col-lg-4 col-md-6 product-item" data-category="accessories">
                <article class="product-card" aria-labelledby="title-mouse-2">
                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='200'%3E%3Crect width='300' height='200' fill='%23e9ecef'/%3E%3Ctext x='150' y='100' text-anchor='middle' fill='%23495057' font-size='14'%3EMouse%3C/text%3E%3C/svg%3E" 
                         class="product-image" alt="Mouse Gaming Precision ‚Äî 16.000 DPI, 11 botones programables, ergonom√≠a avanzada">

                    <h2 id="title-mouse-2" class="product-title" style="font-size: 1.3rem; font-weight: bold; margin-bottom: 0.5rem;">Mouse Gaming Precision</h2>

                    <div class="product-description">
                        16,000 DPI, 11 botones programables, ergonom√≠a avanzada y sensor √≥ptico de alta precisi√≥n.
                    </div>

                    <div style="margin: 1rem 0;">
                        <span aria-hidden="true">‚≠ê‚≠ê‚≠ê‚≠ê‚òÜ</span>
                        <span class="visually-hidden">Puntuaci√≥n 4 de 5. 41 rese√±as.</span>
                        <span style="color: #6c757d; margin-left: 0.5rem;">(41 rese√±as)</span>
                    </div>

                    <div class="d-flex justify-content-between align-items-center">
                        <span class="price" data-price="79.99">‚Ç¨79.99</span>
                        <span class="stock-info stock-low" role="status" aria-live="polite" aria-atomic="true">
                            ‚ö†Ô∏è √öltimas unidades (2 restantes)
                            <span class="visually-hidden">√öltimas unidades: 2 restantes</span>
                        </span>
                    </div>

                    <div class="product-actions">
                        <button class="btn-add-cart" 
                                onclick="addToCart('mouse-1', 'Mouse Gaming Precision', 79.99)"
                                data-product-id="mouse-1"
                                aria-label="A√±adir Mouse Gaming Precision al carrito">
                            A√±adir al carrito
                        </button>

                        <label for="qty-mouse-1" class="visually-hidden">Cantidad para Mouse Gaming Precision</label>
                        <select id="qty-mouse-1" style="width: 80px; margin-left: 0.5rem;" aria-label="Seleccionar cantidad para Mouse Gaming Precision">
                             <option value="1">1</option>
                             <option value="2">2</option>
                        </select>
                        <button type="button" class="btn btn-sm btn-outline-secondary apply-qty-btn" data-product-id="mouse-1" aria-label="Aplicar cantidad seleccionada para Mouse Gaming Precision" style="margin-left:0.4rem;">OK</button>
                    </div>
                </article>
            </div>
        </div>
        
        <!-- Mensaje cuando no hay productos - PROBLEMA -->
        <div id="noProductsMessage" style="display: none; text-align: center; padding: 3rem; color: #6c757d;">
            <div style="font-size: 4rem; margin-bottom: 1rem;">üîç</div>
            <div style="font-size: 1.2rem; font-weight: 500;">No se encontraron productos</div>
            <div>Intenta con otros t√©rminos de b√∫squeda o filtros</div>
        </div>
    </main>
    
    <!-- Carrito lateral: overlay y dialog accesible -->
    <div id="cartOverlay" class="cart-overlay" role="button" aria-label="Cerrar carrito" tabindex="0" hidden></div>
    
    <aside id="cartSidebar" class="cart-sidebar" role="dialog" aria-modal="true" aria-labelledby="cartTitle" aria-hidden="true">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; border-bottom: 2px solid #e9ecef; padding-bottom: 1rem;">
            <h2 id="cartTitle" style="font-size: 1.25rem; font-weight: bold; margin:0;">
                üõí Tu Carrito
            </h2>
            <button id="closeCartBtn" aria-label="Cerrar carrito" style="background: none; border: none; font-size: 1.5rem; cursor: pointer;">‚úï</button>
        </div>
        
        <!-- Lista de productos en el carrito - PROBLEMAS -->
        <div id="cartItems" aria-live="polite" aria-atomic="true">
            <div id="emptyCartMessage" role="status" style="text-align: center; padding: 2rem; color: #6c757d;">
                <div style="font-size: 3rem; margin-bottom: 1rem;">üõí</div>
                <div style="font-size: 1.1rem; margin-bottom: 0.5rem;">Tu carrito est√° vac√≠o</div>
                <div>¬°A√±ade algunos productos para comenzar!</div>
            </div>
        </div>
        
        <!-- Resumen del carrito - PROBLEMAS -->
        <div id="cartSummarySection" style="display: none;">
            <div class="cart-summary">
                <!-- PROBLEMA: Resumen sin estructura sem√°ntica -->
                <div style="font-weight: bold; margin-bottom: 1rem; font-size: 1.2rem;">
                    Resumen del pedido
                </div>
                
                <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                    <span>Subtotal:</span>
                    <!-- PROBLEMA: Precio sin formato accesible -->
                    <span id="subtotal">‚Ç¨0.00</span>
                </div>
                
                <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                    <span>Env√≠o:</span>
                    <span id="shipping">‚Ç¨9.99</span>
                </div>
                
                <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                    <span>Impuestos:</span>
                    <span id="taxes">‚Ç¨0.00</span>
                </div>
                
                <hr>
                
                <div style="display: flex; justify-content: space-between; font-weight: bold; font-size: 1.2rem;">
                    <span>Total:</span>
                    <span id="total">‚Ç¨0.00</span>
                </div>
                
                <!-- PROBLEMA: Botones de acci√≥n sin descripci√≥n -->
                <div style="margin-top: 1.5rem; gap: 0.5rem; display: flex; flex-direction: column;">
                    <button onclick="proceedToCheckout()" 
                            class="btn btn-primary btn-lg">
                        Proceder al pago
                    </button>
                    
                    <button onclick="clearCart()" 
                            class="btn btn-outline-danger">
                        Vaciar carrito
                    </button>
                </div>
            </div>
        </div>
    </aside>
    
    <!-- Notificaciones accesibles -->
    <div id="notifications" role="region" aria-live="polite" aria-atomic="true" style="position: fixed; top: 20px; right: 20px; z-index: 9999; max-width: 400px;"></div>
    <!-- Announcer para mensajes cortos (cambios de carrito, resultados) -->
    <div id="a11yAnnouncer" class="visually-hidden" aria-live="polite" aria-atomic="true"></div>
    
    <script src="{{ url_for('static', filename='js/portal.js') }}"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        /* Formateo monetario accesible y mejoras para precios */
        function formatCurrency(value) {
            try {
                return new Intl.NumberFormat('es-ES', { style: 'currency', currency: 'EUR' }).format(value);
            } catch (e) {
                return `‚Ç¨${value.toFixed(2)}`;
            }
        }

         // Estado del carrito
        let cartItems = [];
        let cartTotal = 0;
        let isCartOpen = false;
        let selectedQuantities = {};
        let lastFocusedElementBeforeCart = null;
        
        // PROBLEMA: Funci√≥n a√±adir al carrito sin feedback accesible
        function addToCart(productId, productName, price) {
            const quantity = selectedQuantities[productId] || 1;
            const button = document.querySelector(`[data-product-id="${productId}"]`);

            if (button) {
                button.classList.add('loading-product');
                button.setAttribute('aria-busy', 'true');
                button.disabled = true;
                button.textContent = 'A√±adiendo...';
            }

            setTimeout(() => {
                const existingItem = cartItems.find(item => item.id === productId);
                if (existingItem) {
                    existingItem.quantity += quantity;
                } else {
                    cartItems.push({ id: productId, name: productName, price: price, quantity: quantity });
                }

                updateCartUI();
                announce(`${productName} a√±adido al carrito`);
                showNotification(`${productName} a√±adido al carrito`, 'success');

                if (button) {
                    button.classList.remove('loading-product');
                    button.removeAttribute('aria-busy');
                    button.textContent = 'A√±adir al carrito';
                    button.disabled = false;
                }
            }, 600);
        }
        
        function updateCartUI() {
            const cartBadge = document.getElementById('cartBadge');
            const cartBadgeLabel = document.getElementById('cartBadgeLabel');
            const cartItemsContainer = document.getElementById('cartItems');
            const emptyMessage = document.getElementById('emptyCartMessage');
            const summarySection = document.getElementById('cartSummarySection');

            const totalItems = cartItems.reduce((sum, item) => sum + item.quantity, 0);
            const subtotal = cartItems.reduce((sum, item) => sum + (item.price * item.quantity), 0);

            if (totalItems > 0) {
                cartBadge.style.display = 'flex';
                cartBadge.textContent = totalItems;
                cartBadgeLabel.textContent = `Carrito: ${totalItems} art√≠culo(s)`;
            } else {
                cartBadge.style.display = 'none';
                cartBadgeLabel.textContent = 'Carrito vac√≠o';
            }

            if (cartItems.length === 0) {
                emptyMessage.style.display = 'block';
                summarySection.style.display = 'none';
                cartItemsContainer.innerHTML = emptyMessage.outerHTML;
            } else {
                emptyMessage.style.display = 'none';
                summarySection.style.display = 'block';

                const itemsHTML = cartItems.map(item => `
                    <div class="cart-item" role="group" aria-label="${item.name}">
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='60'%3E%3Crect width='60' height='60' fill='%23e9ecef'/%3E%3C/svg%3E" 
                             class="cart-item-image" alt="${item.name}">
                        <div class="cart-item-details">
                            <div style="font-weight: 500;">${item.name}</div>
                            <div style="color: #6c757d; font-size: 0.9rem;">‚Ç¨${item.price.toFixed(2)} c/u</div>
                        </div>
                        <div class="quantity-controls" aria-label="Controles de cantidad para ${item.name}">
                            <button class="quantity-btn" aria-label="Disminuir cantidad" onclick="updateCartItemQuantity('${item.id}', ${item.quantity - 1})">-</button>
                            <input type="text" class="quantity-input" value="${item.quantity}" readonly aria-label="Cantidad actual">
                            <button class="quantity-btn" aria-label="Aumentar cantidad" onclick="updateCartItemQuantity('${item.id}', ${item.quantity + 1})">+</button>
                        </div>
                        <button aria-label="Eliminar ${item.name} del carrito" onclick="removeFromCart('${item.id}')" style="background: none; border: none; color: #dc3545; cursor: pointer; font-size: 1.2rem;">üóëÔ∏è</button>
                    </div>
                `).join('');

                cartItemsContainer.innerHTML = itemsHTML;

                const shipping = subtotal > 50 ? 0 : 9.99;
                const taxes = subtotal * 0.21;
                const total = subtotal + shipping + taxes;

                // Usar formato accesible y a√±adir aria-labels
                document.getElementById('subtotal').textContent = formatCurrency(subtotal);
                document.getElementById('subtotal').setAttribute('aria-label', `Subtotal ${formatCurrency(subtotal)}`);

                document.getElementById('shipping').textContent = shipping === 0 ? 'Gratis' : formatCurrency(shipping);
                document.getElementById('shipping').setAttribute('aria-label', `Env√≠o ${shipping === 0 ? 'Gratis' : formatCurrency(shipping)}`);

                document.getElementById('taxes').textContent = formatCurrency(taxes);
                document.getElementById('taxes').setAttribute('aria-label', `Impuestos ${formatCurrency(taxes)}`);

                document.getElementById('total').textContent = formatCurrency(total);
                document.getElementById('total').setAttribute('aria-label', `Total ${formatCurrency(total)}`);
 
                announce(`Carrito actualizado. ${totalItems} art√≠culo(s). Total ${document.getElementById('total').textContent}`);
            }
        }
        
        // PROBLEMA: Actualizar UI sin accesibilidad
        function updateCartItemQuantity(productId, newQuantity) {
            if (newQuantity <= 0) {
                removeFromCart(productId);
                return;
            }
            
            const item = cartItems.find(item => item.id === productId);
            if (item) {
                const oldQuantity = item.quantity;
                item.quantity = newQuantity;
                
                // PROBLEMA: Cambio no anunciado
                updateCartUI();
                
                // PROBLEMA: No indica qu√© cambi√≥ espec√≠ficamente
                if (newQuantity > oldQuantity) {
                    console.log(`Cantidad aumentada para ${item.name}`);
                } else {
                    console.log(`Cantidad reducida para ${item.name}`);
                }
            }
        }
        
        // PROBLEMA: Eliminar producto sin confirmaci√≥n accesible
        function removeFromCart(productId) {
            const itemIndex = cartItems.findIndex(item => item.id === productId);
            
            if (itemIndex > -1) {
                const removedItem = cartItems[itemIndex];
                cartItems.splice(itemIndex, 1);
                
                updateCartUI();
                showNotification(`${removedItem.name} eliminado del carrito`, 'info');
                
                // PROBLEMA: No enfoca elemento apropiado despu√©s de eliminar
            }
        }
        
        // Toggle carrito con manejo de foco y trap
        function toggleCart() {
            const cartSidebar = document.getElementById('cartSidebar');
            const cartOverlay = document.getElementById('cartOverlay');
            const mainContent = document.getElementById('mainContent');
            
            isCartOpen = !isCartOpen;
            
            if (isCartOpen) {
                lastFocusedElementBeforeCart = document.activeElement;
                cartSidebar.classList.add('open');
                cartSidebar.removeAttribute('aria-hidden');
                cartOverlay.hidden = false;
                cartOverlay.classList.add('show');
                mainContent.setAttribute('aria-hidden', 'true');
                
                const focusable = cartSidebar.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
                if (focusable.length) focusable[0].focus();
                
                document.addEventListener('keydown', trapFocusHandler);
                document.addEventListener('keydown', escCloseHandler);
            } else {
                cartSidebar.classList.remove('open');
                cartSidebar.setAttribute('aria-hidden', 'true');
                cartOverlay.classList.remove('show');
                cartOverlay.hidden = true;
                mainContent.setAttribute('aria-hidden', 'false');
                
                if (lastFocusedElementBeforeCart && typeof lastFocusedElementBeforeCart.focus === 'function') {
                    lastFocusedElementBeforeCart.focus();
                }
                
                document.removeEventListener('keydown', trapFocusHandler);
                document.removeEventListener('keydown', escCloseHandler);
            }
        }
        
        function trapFocusHandler(e) {
            if (!isCartOpen) return;
            if (e.key !== 'Tab') return;
            
            const container = document.getElementById('cartSidebar');
            const focusable = Array.from(container.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'))
                .filter(el => !el.hasAttribute('disabled'));
            if (!focusable.length) return;
            
            const first = focusable[0];
            const last = focusable[focusable.length - 1];
            
            if (e.shiftKey) {
                if (document.activeElement === first) {
                    e.preventDefault();
                    last.focus();
                }
            } else {
                if (document.activeElement === last) {
                    e.preventDefault();
                    first.focus();
                }
            }
        }
        
        function escCloseHandler(e) {
            if (e.key === 'Escape' && isCartOpen) toggleCart();
        }
        
        // PROBLEMA: Notificaciones no accesibles
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `alert alert-${type} alert-dismissible`;
            notification.setAttribute('role', 'status');
            notification.style.marginBottom = '0.5rem';
            
            const closeBtn = document.createElement('button');
            closeBtn.type = 'button';
            closeBtn.className = 'btn-close';
            closeBtn.setAttribute('aria-label', 'Cerrar notificaci√≥n');
            closeBtn.addEventListener('click', () => notification.remove());
            
            notification.textContent = message;
            notification.appendChild(closeBtn);
            document.getElementById('notifications').appendChild(notification);
            
            announce(message);
            
            setTimeout(() => { notification.remove(); }, 4000);
        }
        
        function announce(text) {
            const a = document.getElementById('a11yAnnouncer');
            if (!a) return;
            a.textContent = '';
            setTimeout(() => { a.textContent = text; }, 100);
        }
        
        // PROBLEMA: Filtrado sin feedback accesible
        function filterProducts(searchTerm) {
            const products = document.querySelectorAll('.product-item');
            let visibleCount = 0;
            
            products.forEach(product => {
                const productName = product.querySelector('.product-card > div').textContent.toLowerCase();
                const productDescription = product.querySelector('.product-description').textContent.toLowerCase();
                
                if (productName.includes(searchTerm.toLowerCase()) || 
                    productDescription.includes(searchTerm.toLowerCase()) ||
                    searchTerm === '') {
                    product.style.display = 'block';
                    visibleCount++;
                } else {
                    product.style.display = 'none';
                }
            });
            
            // PROBLEMA: Resultado de b√∫squeda no anunciado
            const noProductsMessage = document.getElementById('noProductsMessage');
            if (visibleCount === 0 && searchTerm !== '') {
                noProductsMessage.style.display = 'block';
            } else {
                noProductsMessage.style.display = 'none';
            }
        }
        
        // PROBLEMA: Ordenamiento sin feedback
        function sortProducts(sortBy) {
             const grid = document.getElementById('productsGrid');
             const products = Array.from(grid.querySelectorAll('.product-item'));
             
             products.sort((a, b) => {
                 switch (sortBy) {
                     case 'name':

                        const nameA = a.querySelector('.product-title') ? a.querySelector('.product-title').textContent : '';
                        const nameB = b.querySelector('.product-title') ? b.querySelector('.product-title').textContent : '';
                       return nameA.localeCompare(nameB, 'es');
                         
                     case 'price-low':
                     case 'price-high':
                         const priceA = parseFloat(a.querySelector('.price').dataset.price || 0);
                        const priceB = parseFloat(b.querySelector('.price').dataset.price || 0);
                        return sortBy === 'price-low' ? priceA - priceB : priceB - priceA;
                         
                     default:
                         return 0;
                 }
             });
             
             // PROBLEMA: Cambio de orden no anunciado
             products.forEach(product => grid.appendChild(product));
         }
        
        // PROBLEMA: Filtro por categor√≠a sin feedback
        function filterByCategory(category) {
            const products = document.querySelectorAll('.product-item');
            
            products.forEach(product => {
                if (category === '' || product.dataset.category === category) {
                    product.style.display = 'block';
                } else {
                    product.style.display = 'none';
                }
            });
        }
        
        // PROBLEMA: Funciones adicionales sin accesibilidad
        function updateQuantitySelection(productId, quantity) {
            selectedQuantities[productId] = parseInt(quantity, 10);
            announce(`Seleccionada ${quantity} unidad(es) para el producto`);
        }
        
        function toggleFavorite(productId) {
            const button = document.querySelector(`[data-product-id="${productId}"].favorite-btn`) || document.querySelector(`[onclick="toggleFavorite('${productId}')"]`);
            if (!button) return;
            const isFavorite = button.getAttribute('aria-pressed') === 'true';
            button.setAttribute('aria-pressed', isFavorite ? 'false' : 'true');
            button.textContent = isFavorite ? 'ü§ç' : '‚ù§Ô∏è';
            const msg = isFavorite ? 'Eliminado de favoritos' : 'A√±adido a favoritos';
            showNotification(msg, 'info');
            announce(msg);
        }
        
        function notifyWhenAvailable(productId) {
            // Evitar prompt nativo; dar feedback y solicitar email v√≠a formulario real en implementaci√≥n completa
            showNotification('Funcionalidad de notificaci√≥n solicitada. Introduce tu email en el formulario del producto (demo).', 'info');
            announce('Notificaci√≥n solicitada para el producto');
        }
        
        function clearCart() {
            // Evitar confirm nativo; uso de confirmaci√≥n simple accesible (implementar modal real si hace falta)
            const ok = window.confirm ? window.confirm('¬øVaciar el carrito?') : true;
            if (ok) {
                cartItems = [];
                updateCartUI();
                showNotification('Carrito vaciado', 'info');
            }
        }
        
        function proceedToCheckout() {
            showNotification('Redirigiendo al proceso de pago...', 'info');
            // Simular redirecci√≥n
            setTimeout(() => {
                alert('Demo: Aqu√≠ se redirigir√≠a al proceso de pago real');
            }, 1000);
        }
        
        // Inicializaci√≥n - PROBLEMA: Sin navegaci√≥n con teclado
        document.addEventListener('DOMContentLoaded', function() {
            console.log('TechShop cargado');
            
            // Bind cart controls without inline handlers
            const openBtn = document.getElementById('openCartBtn');
            const closeBtn = document.getElementById('closeCartBtn');
            const cartOverlay = document.getElementById('cartOverlay');
            
            if (openBtn) {
                openBtn.addEventListener('click', () => { if (!isCartOpen) toggleCart(); });
                openBtn.addEventListener('keydown', (e) => { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); toggleCart(); }});
            }
            if (closeBtn) {
                closeBtn.addEventListener('click', () => { if (isCartOpen) toggleCart(); });
                closeBtn.addEventListener('keydown', (e) => { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); toggleCart(); }});
            }
            if (cartOverlay) {
                cartOverlay.addEventListener('click', () => { if (isCartOpen) toggleCart(); });
                cartOverlay.addEventListener('keydown', (e) => { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); toggleCart(); }});
            }

            /* A11Y: evitar "JavaScript jump menu" para el select de orden.
               Ejecutar la ordenaci√≥n solo al hacer clic en "Aplicar" o al pulsar Enter
               mientras el select tiene el foco, y anunciar el resultado. */
            const sortSelect = document.getElementById('sortSelect');
            const applySortBtn = document.getElementById('applySortBtn');
            if (applySortBtn && sortSelect) {
                 applySortBtn.addEventListener('click', () => {
                     sortProducts(sortSelect.value);
                     announce(sortSelect.value ? `Ordenado por ${sortSelect.options[sortSelect.selectedIndex].text}` : 'Orden restablecido');
                 });
 
                 // Permitir aplicar con Enter desde el select (accesible para teclado)
                 sortSelect.addEventListener('keydown', (e) => {
                     if (e.key === 'Enter') {
                         e.preventDefault();
                         sortProducts(sortSelect.value);
                         announce(sortSelect.value ? `Ordenado por ${sortSelect.options[sortSelect.selectedIndex].text}` : 'Orden restablecido');
                     }
                 });
             }

            // Evitar "jump menu" para filtro de categor√≠a: aplicar con bot√≥n
            const filterSelectEl = document.getElementById('filterSelect');
            const applyFilterBtnEl = document.getElementById('applyFilterBtn');
            if (applyFilterBtnEl && filterSelectEl) {
                applyFilterBtnEl.addEventListener('click', () => {
                    filterByCategory(filterSelectEl.value);
                    announce(filterSelectEl.value ? `Filtrado por ${filterSelectEl.options[filterSelectEl.selectedIndex].text}` : 'Mostrando todas las categor√≠as');
                });
                filterSelectEl.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        filterByCategory(filterSelectEl.value);
                        announce(filterSelectEl.value ? `Filtrado por ${filterSelectEl.options[filterSelectEl.selectedIndex].text}` : 'Mostrando todas las categor√≠as');
                    }
                });
            }

            // Aplicar cantidad seleccionada solo al pulsar OK (evita jump menu)
            document.querySelectorAll('.apply-qty-btn').forEach(btn => {
                 btn.addEventListener('click', (e) => {
                     const pid = btn.getAttribute('data-product-id');
                     const sel = document.getElementById(`qty-${pid}`);
                     if (sel) {
                         updateQuantitySelection(pid, sel.value);
                         announce(`Cantidad aplicada: ${sel.value} unidad(es) para el producto`);
                     }
                 });
             });

            // A11Y: a√±adir aria-labels a precios est√°ticos en productos usando data-price
            document.querySelectorAll('.price').forEach(p => {
                const v = parseFloat(p.dataset.price || 0);
                if (!isNaN(v)) {
                    p.setAttribute('aria-label', formatCurrency(v));
                }
            });
         });
     </script>
    
</body>
</html>

<!--
PROBLEMAS CR√çTICOS DE ACCESIBILIDAD PARA CORREGIR:

ESTRUCTURA Y NAVEGACI√ìN:
1. ‚úó Falta skip links para navegaci√≥n
2. ‚úó Productos sin estructura sem√°ntica (article, header, etc.)
3. ‚úó Filtros y controles sin labels apropiados  
4. ‚úó Carrito lateral sin landmark apropiado

INFORMACI√ìN DE PRODUCTOS:
5. ‚úó Im√°genes sin alt text descriptivo o con alt innecesario
6. ‚úó Calificaciones con estrellas no accesibles
7. ‚úó Precios sin formato monetario accesible
8. ‚úó Stock info solo visual (colores y emojis)
9. ‚úó Encabezados sin jerarqu√≠a apropiada

CONTROLES INTERACTIVOS:
10. ‚úó Botones sin aria-label descriptivo
11. ‚úó Selectores de cantidad sin labels
12. ‚úó Botones de favorito sin descripci√≥n de estado
13. ‚úó Bot√≥n carrito sin informaci√≥n de contenido
14. ‚úó Botones deshabilitados sin explicaci√≥n

CARRITO LATERAL:
15. ‚úó Carrito sin role="dialog" o similar
16. ‚úó No maneja foco cuando se abre/cierra
17. ‚úó Bot√≥n cerrar sin aria-label
18. ‚úó Lista de productos sin estructura apropiada
19. ‚úó Controles de cantidad sin labels
20. ‚úó Botones eliminar sin confirmaci√≥n accesible

CONTENIDO DIN√ÅMICO:
21. ‚úó Cambios de carrito no anunciados (aria-live)
22. ‚úó Estados de carga no accesibles
23. ‚úó Notificaciones no anunciadas a lectores de pantalla
24. ‚úó Resultados de filtros/b√∫squeda no anunciados
25. ‚úó Cambios de cantidad no descritos

FEEDBACK Y ESTADOS:
26. ‚úó Badge de carrito sin descripci√≥n accesible
27. ‚úó Productos agotados sin informaci√≥n clara
28. ‚úó Estados de carga sin indicadores apropiados
29. ‚úó Errores y confirmaciones no accesibles
30. ‚úó Cambios de ordenamiento no anunciados

INTERACCI√ìN CON TECLADO:
31. ‚úó Carrito no navegable con teclado
32. ‚úó Falta manejo de tecla Escape para cerrar carrito
33. ‚úó Trap de foco no implementado en carrito
34. ‚úó Controles personalizados sin eventos de teclado

FORMULARIOS Y ENTRADAS:
35. ‚úó Campo de b√∫squeda sin label
36. ‚úó Selectores de filtro sin labels
37. ‚úó Prompts nativos (confirm, prompt) no accesibles
38. ‚úó Entrada de cantidad sin validaci√≥n accesible

El equipo debe implementar:
- Landmarks apropiados (main, complementary para carrito)
- Estructura sem√°ntica para productos (article, h2, etc.)
- Labels y descripciones para todos los controles
- aria-live regions para cambios din√°micos
- Manejo apropiado de foco en carrito lateral
- role="dialog" y trap de foco para carrito
- aria-label para botones con iconos
- Descripciones de estado para productos
- Alternativas accesibles para elementos visuales
- Navegaci√≥n con teclado completa
- Anuncios de cambios de estado y contenido
- Formato accesible para precios y cantidades
-->